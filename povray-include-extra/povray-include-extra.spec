Name:           povray-include-extra
Version:        1.0.0
Release:        1%{?dist}
Summary:        Extra povray include files
License:        GPLv2
Group:          Applications/Multimedia
URL:            http://www.oyonale.com
Source0:        http://www.oyonale.com/downloads/scifi_demo.zip
Source1:        http://www.oyonale.com/downloads/maketree.zip
Source2:        http://www.oyonale.com/downloads/field.pov
Source3:        http://www.oyonale.com/downloads/makesnow.inc
Source4:        http://www.oyonale.com/downloads/makesnow2.inc
Source5:        http://www.oyonale.com/downloads/lostbus.pov
Source6:        http://www.oyonale.com/downloads/pipeset.pov
Source7:        http://www.oyonale.com/downloads/madpipe.zip
Source8:        http://www.imagico.de/pov/water/waves03.zip
Source9:        http://baillp.free.fr/Data/feather.inc
Source10:       http://www.reocities.com/SiliconValley/Lakes/1434/download/tilegen.zip
Source11:       http://www.reocities.com/SiliconValley/Lakes/1434/download/pcm.zip
Source12:       http://www.reocities.com/SiliconValley/Lakes/1434/download/city.zip
Source13:       http://www.reocities.com/SiliconValley/Lakes/1434/download/spray.zip
Source14:       http://www.reocities.com/SiliconValley/Lakes/1434/download/explode.zip
Source15:       http://www.reocities.com/SiliconValley/Lakes/1434/download/galaxy.zip
Source16:       http://www.reocities.com/SiliconValley/Lakes/1434/download/lnsefcts.zip
Source17:       http://www.reocities.com/SiliconValley/Lakes/1434/download/clockmod.zip
Source18:       http://www.reocities.com/SiliconValley/Lakes/1434/download/bend.zip
Source19:       http://www.imagico.de/pov/iw/isowood03.zip
Source20:       http://runevision.com/3d/include/cd.zip
Source21:       http://runevision.com/3d/include/grasstex.zip
Source22:       http://runevision.com/3d/include/ikn.zip
Source23:       http://www.getinfo.net/douge/mayafur15.zip
Source24:       http://www.getinfo.net/douge/mayafur.zip
Source25:       http://www.nolights.de/downloads/parsys.zip
Source26:       http://brannigan.emporia.edu/courses/2004/cs220f04/hand38/eyeball.inc
Source27:       http://brannigan.emporia.edu/courses/2004/cs220f04/hand38/eyeball.pov
Source28:       http://www.f-lohmueller.de/pov_tut/down/pov_objects1.zip
Source29:       http://www.f-lohmueller.de/pov_tut/modelling/dwn/RT_System.zip
Source30:       http://www.f-lohmueller.de/pov_tut/down/shapes_lo.inc
Source31:       http://runevision.com/3d/include/mouth.zip
Source32:       http://news.povray.org/povray.binaries.scene-files/attachment/%3C3d06c6c4%40news.povray.org%3E/starship_enterprise_v1.00.zip
Source33:       http://brannigan.emporia.edu/courses/2008/cs220f08/hand63/ncc1701.zip
Source34:       http://www.dylanbeattie.net/starwars/download/stdest.zip
Source35:       http://www.dylanbeattie.net/starwars/download/tie_def.zip
Source36:       http://www.dylanbeattie.net/starwars/download/tie_i.zip
Source37:       http://www.dylanbeattie.net/starwars/download/tie_f.zip
Source38:       http://www.dylanbeattie.net/starwars/download/shuttle.zip
Source39:       http://www.dylanbeattie.net/starwars/download/tie_d.zip
Source40:       http://www.dylanbeattie.net/starwars/download/falcon_wip.zip
Source41:       http://www.dylanbeattie.net/starwars/download/ewing.zip
Source42:       http://www.dylanbeattie.net/starwars/download/pilot.zip
Source43:       http://www.dylanbeattie.net/starwars/download/awing.zip
Source44:       http://www.dylanbeattie.net/starwars/download/ywing.zip
Source45:       http://www.dylanbeattie.net/starwars/download/ccrv.zip
Source46:       http://www.dylanbeattie.net/starwars/download/xwing.zip
Source47:       http://www.dylanbeattie.net/starwars/download/bwing.zip
Source48:       http://www.dylanbeattie.net/starwars/download/c_city.zip
Source49:       http://tofbouf.free.fr/download/fern.zip
Source50:       http://tofbouf.free.fr/download/explose.zip
Source51:       http://objects.povworld.org/binaries/earth.pov
Source52:       http://objects.povworld.org/binaries/columns.zip
Source53:       http://objects.povworld.org/binaries/lighthouse.zip
Source54:       http://objects.povworld.org/binaries/waterfall.pov
Source55:       http://objects.povworld.org/binaries/tintinrocket.zip
Source56:       http://objects.povworld.org/binaries/boat.pov
Source57:       http://objects.povworld.org/binaries/sunboat.pov
Source58:       http://runevision.com/3d/include/particles/particle101.zip
Source59:       http://runevision.com/3d/include/electric.zip
Source60:       http://runevision.com/3d/include/illusion.zip
Source61:       http://www.travelnotes.de/rays/seaplane/b317.include
Source62:       http://www.travelnotes.de/rays/seaplane/palms.include
Source63:       http://www.f-lohmueller.de/pov_tut/objects/plants/Palm_1.inc
Source64:       http://www.f-lohmueller.de/pov_tut/objects/plants/Palm_2.inc
Source65:       http://www.f-lohmueller.de/pov_tut/objects/plants/Palm_1quadro.inc
Source66:       http://www.f-lohmueller.de/pov_tut/objects/plants/Reeds_0.inc
Source67:       http://web.archive.org/web/20071101052625/propro.ru/go/Wshop/povtree/tomtree-1.5.zip
Source68:       http://www.weblearn.hs-bremen.de/risse/GCG/AG_GCG/AG_GCG/POV.POV/sonne/NKFlare/nkflare.inc
Source69:       http://www.reocities.com/SiliconValley/Lakes/1434/download/50-300mm.txt
Source70:       http://www.reocities.com/SiliconValley/Lakes/1434/download/coil.txt
Source71:       http://www.reocities.com/SiliconValley/Lakes/1434/download/coilexample.txt
Source72:       http://www.reocities.com/SiliconValley/Lakes/1434/download/link.zip
Source73:       http://www.reocities.com/SiliconValley/Lakes/1434/download/mc21src.zip
Source74:       http://www.reocities.com/SiliconValley/Lakes/1434/download/rolandmas.txt
Source75:       http://www.reocities.com/SiliconValley/Lakes/1434/download/spline.zip
Source76:       http://www.reocities.com/SiliconValley/Lakes/1434/download/spweb.txt
Source77:       http://www.reocities.com/SiliconValley/Lakes/1434/download/trimap.zip
Source78:       http://www.reocities.com/SiliconValley/Lakes/1434/download/truss.zip

BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
BuildRequires:  unzip
BuildRequires:  perl
Requires:       povray

%description
Extra povray include files

%prep
mkdir -p %{name}
cd %{name}
%{__sed} -e '/^#!/ s|/usr/local/bin/perl|%{_bindir}/perl|' %{SOURCE74} > rolandmas.pl
chmod +x rolandmas.pl

%build
cd %{name}
touch macros.list
for i in %{SOURCE0} %{SOURCE1} %{SOURCE7} %{SOURCE8} %{SOURCE10} %{SOURCE11} \
         %{SOURCE12} %{SOURCE13} %{SOURCE14} %{SOURCE15} %{SOURCE16} \
         %{SOURCE17} %{SOURCE18} %{SOURCE19} %{SOURCE20} %{SOURCE22} \
         %{SOURCE25} %{SOURCE32} %{SOURCE33} %{SOURCE34} %{SOURCE35} \
         %{SOURCE36} %{SOURCE37} %{SOURCE38} %{SOURCE39} %{SOURCE40} \
         %{SOURCE41} %{SOURCE42} %{SOURCE43} %{SOURCE44} %{SOURCE45} \
         %{SOURCE46} %{SOURCE47} %{SOURCE48} %{SOURCE49} %{SOURCE50} \
         %{SOURCE52} %{SOURCE53} %{SOURCE55} %{SOURCE58} %{SOURCE59} \
         %{SOURCE60} %{SOURCE67} %{SOURCE72} %{SOURCE73} %{SOURCE75} \
         %{SOURCE77} %{SOURCE78}
do
    name=$(basename $i | tr '[A-Z]' '[a-z]')
    dir=${name%.zip}
    echo ${dir} >> macros.list
    mkdir ${dir}
    pushd ${dir}
    unzip $i
    ../rolandmas.pl
    popd
done
for i in %{SOURCE21} %{SOURCE23} %{SOURCE24} %{SOURCE28} %{SOURCE29} %{SOURCE31}
do
    name=$(basename $i)
    dir=${name%.zip}
    echo ${dir} >> macros.list
    unzip $i
    [ "${dir}" = "mayafur15" ] && mv mayafur mayafur15
    pushd ${dir}
    ../rolandmas.pl
    popd
done

for i in %{SOURCE2} %{SOURCE3} %{SOURCE4} %{SOURCE5} %{SOURCE6} %{SOURCE9} \
         %{SOURCE26} %{SOURCE27} %{SOURCE30} %{SOURCE51} %{SOURCE54} \
         %{SOURCE56} %{SOURCE57} %{SOURCE63} %{SOURCE64} %{SOURCE65} \
         %{SOURCE66} %{SOURCE68}
do
    %{__cp} $i .
done
%{__cp} %{SOURCE61} b317.in
%{__cp} %{SOURCE62} palms.inc
%{__cp} %{SOURCE69} 50-300mm.inc
%{__cp} %{SOURCE70} coil.inc
%{__cp} %{SOURCE71} coil.pov
%{__cp} %{SOURCE76} spweb.inc
./rolandmas.pl

find . -name '*.tmp' -delete

%check

%install
rm -rf $RPM_BUILD_ROOT
%{__mkdir_p} $RPM_BUILD_ROOT%{_datadir}/%{name}
for dir in $(cat %{name}/macros.list)
do
    cp -r %{name}/${dir} $RPM_BUILD_ROOT%{_datadir}/%{name}/
done
cp %{name}/*.pov %{name}/*.inc %{name}/rolandmas.pl $RPM_BUILD_ROOT%{_datadir}/%{name}/

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%{_datadir}/%{name}/*

%post
echo "Add the following line into your povray.conf"
echo "read* = %{_datadir}/%{name}"

%changelog
* Mon Mar 24 2013 Didier Fabert <didier.fabert@gmail.com> 1.0.0-1
- First Release